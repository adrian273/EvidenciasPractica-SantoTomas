<?

 class PtEvArchiveMdl extends Model {

	var $pt_assess_id;
	var $visit_log_id;
	var $primary_diag;
	var $secondary_diag;
  var $primary_diag_date;
	var $secondary_diag_date;  
	var $tab_32_assess_type;	
	var $tab_32_assess_type_other_txt;
  var $therapytype;  
	var $provider;
	var $provider_sign_date;
	var $cognition_subjective_chck;
	var $cognition_subjective_updt_chck;
	var $cognition_subjective;
	var $hx_comments_chck;
	var $hx_comments_updt_chck;
	var $hx_comments;
	var $pt_primary_diag;
	var $pt_second_diag;
	var $tab_020_hip_abd_sl;
	var $tab_020_hip_abd_sr;
	var $tab_052_hip_abd_rl;
	var $tab_052_hip_abd_rl_deg;
	var $tab_052_hip_abd_rr;
	var $tab_052_hip_abd_rr_deg;
	var $tab_020_hip_add_sl;
	var $tab_020_hip_add_sr;
	var $tab_052_hip_add_rl;
	var $tab_052_hip_add_rl_deg;
	var $tab_052_hip_add_rr;
	var $tab_052_hip_add_rr_deg;
	var $tab_020_hip_rot_sl;
	var $tab_020_hip_rot_sr;
	var $tab_052_hip_rot_rl;
	var $tab_052_hip_rot_rl_deg;
	var $tab_052_hip_rot_rr;
	var $tab_052_hip_rot_rr_deg;
	var $tab_020_hip_fle_sl;
	var $tab_020_hip_fle_sr;
	var $tab_052_hip_fle_rl;
	var $tab_052_hip_fle_rl_deg;
	var $tab_052_hip_fle_rr;
	var $tab_052_hip_fle_rr_deg;
	var $tab_020_hip_ext_sl;
	var $tab_020_hip_ext_sr;
	var $tab_052_hip_ext_rl;
	var $tab_052_hip_ext_rl_deg;
	var $tab_052_hip_ext_rr;
	var $tab_052_hip_ext_rr_deg;
	var $tab_020_kne_fle_sl;
	var $tab_020_kne_fle_sr;
	var $tab_052_kne_fle_rl;
	var $tab_052_kne_fle_rl_deg;
	var $tab_052_kne_fle_rr;
	var $tab_052_kne_fle_rr_deg;
	var $tab_020_kne_ext_sl;
	var $tab_020_kne_ext_sr;
	var $tab_052_kne_ext_rl;
	var $tab_052_kne_ext_rl_deg;
	var $tab_052_kne_ext_rr;
	var $tab_052_kne_ext_rr_deg;
	var $tab_020_ank_dor_sl;
	var $tab_020_ank_dor_sr;
	var $tab_052_ank_dor_rl;
	var $tab_052_ank_dor_rl_deg;
	var $tab_052_ank_dor_rr;
	var $tab_052_ank_dor_rr_deg;  
  var $tab_020_ank_plan_sl;
	var $tab_020_ank_plan_sr;
	var $tab_052_ank_plan_rl;
	var $tab_052_ank_plan_rl_deg;
	var $tab_052_ank_plan_rr;
	var $tab_052_ank_plan_rr_deg;  
	var $tab_020_ank_inv_sl;
	var $tab_020_ank_inv_sr;
	var $tab_052_ank_inv_rl;
	var $tab_052_ank_inv_rl_deg;
	var $tab_052_ank_inv_rr;
	var $tab_052_ank_inv_rr_deg;  
  var $tab_020_ank_ever_sl;
	var $tab_020_ank_ever_sr;
	var $tab_052_ank_ever_rl;
	var $tab_052_ank_ever_rl_deg;
	var $tab_052_ank_ever_rr;
	var $tab_052_ank_ever_rr_deg;  
	var $tab_020_sho_fle_sl;
	var $tab_020_sho_fle_sr;
	var $tab_052_sho_fle_rl;
	var $tab_052_sho_fle_rl_deg;
	var $tab_052_sho_fle_rr;
	var $tab_052_sho_fle_rr_deg;
	var $tab_020_sho_ext_sl;
	var $tab_020_sho_ext_sr;
	var $tab_052_sho_ext_rl;
	var $tab_052_sho_ext_rl_deg;
	var $tab_052_sho_ext_rr;
	var $tab_052_sho_ext_rr_deg;
	var $tab_020_sho_abd_sl;
	var $tab_020_sho_abd_sr;
	var $tab_052_sho_abd_rl;
	var $tab_052_sho_abd_rl_deg;
	var $tab_052_sho_abd_rr;
	var $tab_052_sho_abd_rr_deg;
	var $tab_020_sho_add_sl;
	var $tab_020_sho_add_sr;
	var $tab_052_sho_add_rl;
	var $tab_052_sho_add_rl_deg;
	var $tab_052_sho_add_rr;
	var $tab_052_sho_add_rr_deg;
	var $tab_020_elb_fle_sl;
	var $tab_020_elb_fle_sr;
	var $tab_052_elb_fle_rl;
	var $tab_052_elb_fle_rl_deg;
	var $tab_052_elb_fle_rr;
	var $tab_052_elb_fle_rr_deg;
	var $tab_020_elb_ext_sl;
	var $tab_020_elb_ext_sr;
	var $tab_052_elb_ext_rl;
	var $tab_052_elb_ext_rl_deg;
	var $tab_052_elb_ext_rr;
	var $tab_052_elb_ext_rr_deg;
	var $tab_020_wri_gri_sl;
	var $tab_020_wri_gri_sr;
	var $tab_052_wri_gri_rl;
	var $tab_052_wri_gri_rl_deg;
	var $tab_052_wri_gri_rr;
	var $tab_052_wri_gri_rr_deg;
	var $sensor_skin_condition;
	var $home_enviroment;
	var $dme_in_home;
	var $needed;
	var $home_env_dme_in_home_needed;
	var $posture_and_gait_analysis;
	var $physician_user_id;
	var $physician_sign_date;
	var $physician_sign_received_date;
	var $p1_fun_sts_tab048_bed_mob;
	var $p1_fun_sts_tab048_trans_wc_bed;
	var $p1_fun_sts_tab048_trans_tub_show;
	var $p1_fun_sts_tab048_supine_tosit;
	var $p1_fun_sts_tab048_sittostand;
	var $p1_fun_sts_gait_feet;
	var $p1_fun_sts_tab048_gait_ft;
	var $p1_fun_sts_tab048_gait_dev_typ;
	var $p1_fun_sts_tab078_gait_dev_typ;
	var $p1_fun_sts_tab090_weig_bear_12345;
	//var $p1_fun_sts_tab079_weig_bear_12345;
  /**  $p1_fun_sts_tab079_weig_bear_12345 field is replaced by two fields ( $weig_bear_rle, $weig_bear_lle) **/
	var $weig_bear_rle;
	var $weig_bear_lle;
	var $p1_fun_sts_tab079_weig_bear_LR_LE;
	var $p1_fun_sts_tab048_weig_bear_sts;
	var $p1_fun_sts_weig_bear_sts_other_weight;
	var $p1_fun_sts_tab027_weig_bear_sts_other_weight;
	var $p1_fun_sts_tab048_stairs;
	var $p1_fun_sts_tab048_stepscurb;
	var $p1_fun_sts_tab048_toileting;
	var $p1_fun_sts_tab048_wheelcha;
	var $p1_fun_sts_Other_desc;
	var $p1_fun_sts_tab048_Other;
	var $p1_bal_tinetti;
	//var $p1_bal_tinetti_na;
	//var $p1_bal_tinetti_nt;
	var $p1_bal_gait_score;
	var $p1_bal_score;
	var $p1_bal_berg;
	//var $p1_bal_na;
	//var $p1_bal_berg_nt;
	var $p1_bal_desc;
	var $p1_bal_tug;
	//var $p1_bal_tug_na;
	//var $p1_bal_tug_nt;
	var $p1_bal_tug_desc;
	var $p1_bal_tab048_assist_stat;
	var $p1_bal_tab048_assist_dyn_sitt;
	var $p1_bal_tab048_assist_dyn_stan;
	var $p1_bal_assist_desc;
	var $p1_pos_tab049_sitt_tabyyy;
	var $p1_pos_tab049_stand_tabyyy;
	var $p1_postab_049_tran_tabyyy;
	var $p1_pos_desc;
	var $p1_gait_dist_surf;
	var $p1_sa_bp1;
	var $p1_sa_bp2;
	var $p1_sa_RL;
	var $tab_062_right_left;
	var $p1_sa_sitt_lyi_stand;
	var $p1_sa_hr;
	var $p1_sa_o2_sat;
	var $p1_sa_resp;
	var $p1_sa_skin;
	var $p1_pa_nbr;
	var $p1_pa_time_since_last_med;
	var $p1_pa_locat;
	var $p1_pa_curr_pain;
	var $p1_ms_alert;
	var $p1_ms_oriented;
	var $p1_ms_disoriented;
	var $p1_ms_forget;
	var $p1_ms_agitated;
	var $p1_ms_depressed;
	var $p1_he_alone;
	var $p1_he_other_desc;
	var $p1_he_home;
	var $p1_he_apt;
	var $p1_he_mobile;
	var $p1_he_stairs;
	var $p1_he_senior;
	var $p1_he_spacious;
	var $p1_he_clean;
	var $p1_he_crowded;
	var $p1_he_clutter;
	var $p1_he_unsound;
	var $p1_he_no_tel;
	var $p1_saf_clear_path;
	var $p1_saf_fall_precau;
	var $p1_saf_at_home;
	var $p1_saf_emerg_manag;
	var $p1_saf_ortho_precau;
	var $p1_saf_ortho_restric;
	var $p1_saf_steps;
	var $p1_saf_stairs;
	var $p1_saf_24_hour_sup;
	var $p1_saf_infec_control;
	var $p1_saf_use_dme;
	var $p1_saf_use_dme_desc;
	var $p1_other_assessment;
	var $p1_equi_tub;
	var $p1_equi_shower;
	var $p1_equi_handheld;
	var $p1_equi_reacher;
	var $p1_equi_wheelch;
	var $p1_equi_hosp_bed;
	var $p1_equi_beside_comm;
	var $p1_equi_raised_toil;
	var $p1_equi_grab_bars;
	var $p1_equi_grab_toil;
	var $p1_equi_grab_bars_bath;
	var $p1_equi_grab_bars_shower;
	var $p1_equi_walker;
	var $p1_equi_rolling_walk;
	var $p1_equi_cane;
	var $p1_equi_other;
	var $p1_equi_other_desc;
	var $p1_ther_evaluation;
	var $p1_ther_lymphadema;
	var $p1_ther_chest_phys;
	var $p1_ther_ultra_sound;
	var $p1_ther_home_ther;
	var $p1_ther_thera_exerc;
	var $p1_ther_electro;
	var $p1_ther_muscle_reeduc;
	var $p1_ther_balance;
	var $p1_ther_gait_trai;
	var $p1_ther_trans_trai;
	var $p1_ther_prosth_trai;
	var $p1_ther_fabric_devices;
	var $p1_ther_other;
	var $p1_ther_other_text;
	var $p2_amputation;
	var $p2_bowel;
	var $p2_contracture;
	var $p2_dyspnea;
	var $p2_decreased;
	var $p2_shuffling;
	var $p2_dysfunct;
	var $p2_impaired_safe;
	var $p2_soft_tissue;
	var $p2_impaired_coord;
	var $p2_swollen;
	var $p2_swollen_specify;
	var $p2_other_func;
	var $p2_other_func_desc;
	var $p2_ambulation;
	var $p2_speech;
	var $p2_endurance;
	var $p2_poor_cond;
	var $p2_imp_func_stre;
	var $p2_imp_func_mob;
	var $p2_imp_func_trans;
	var $p2_balance;
	var $p2_pain_restrict;
	var $p2_hearing;
	var $p2_legally_blind;
	var $p2_paralysis;
	var $p2_evalua;
	var $p2_ultra;
	var $p2_home;
	var $p2_therap;
	var $p2_transfer;
	//var $p2_manage;
	var $p2_pulse_oxi;
	var $p2_modal;
	var $p2_modal_desc;
	var $p2_other_interv;
	var $p2_other_interv_desc;
	var $p2_discharge;
	var $p2_int_lympha;
	var $p2_int_gait;
	var $p2_int_chest;
	var $p2_int_balance;
	var $p2_elect;
	var $p2_muscle;
	var $p2_prosthe;
	//var $p2_fabric;
	var $p2_home_safety;
	var $p2_fall_prev;
	var $p2_return_to_pre;
	var $p2_return_to_pre_weeks;
	var $p2_tab_063_weeks;
	var $p2_patient_will;
	var $p2_patient_will_weeks;
	var $p2_return_to_opti;
	var $p2_return_to_opti_weeks;
	var $p2_demost_eff;
	var $p2_demost_eff_weeks;
	var $p2_improv_bed_mov;
	var $p2_improv_bed_mov_desc1;
	var $p2_improv_bed_mov_weeks;
	var $p2_improv_bed_mov_indep;
	var $p2_improv_bed_mov_indep_weeks;
	var $p2_improv_trans;
	var $p2_improv_trans_desc1;
	var $p2_improv_trans_desc2;
	var $p2_improv_trans_weeks;
	var $p2_indep_trans;
	var $p2_indep_trans_weeks;
	var $p2_pat_indep;
	var $p2_pat_indep_weeks;
	var $p2_improv_wheel;
	var $p2_improv_wheel_desc;
	var $p2_improv_wheel_weeks;
	var $p2_pat_ambul;
	var $p2_pat_ambul_desc1;
	var $p2_pat_ambul_desc2;
	var $p2_pat_ambul_weeks;
	var $p2_climb;
	var $p2_climb_desc1;
	var $p2_climb_desc2;
	var $p2_tab_063_climb_weeks;
	var $p2_indep_ambul;
	var $p2_indep_ambul_desc;
	var $p2_indep_ambul_weeks;
	var $p2_ambul_endur;
	var $p2_ambul_endur_desc1;
	var $p2_ambul_endur_desc2;
	var $p2_ambul_endur_weeks;
	var $p2_increa_stren_UE;
	var $p2_increa_stren_UE_R;
	var $p2_increa_stren_UE_L;
	var $p2_increa_stren_UE_5;
	var $p2_increa_stren_UE_weeks;
	var $p2_increa_stren_LE;
	var $p2_increa_stren_LE_R;
	var $p2_increa_stren_LE_L;
	var $p2_increa_stren_LE_5;
	var $p2_increa_stren_LE_weeks;
	var $p2_increa_rom;
	var $p2_increa_rom_desc1;
	var $p2_increa_rom_desc2;
	var $p2_increa_rom_desc3;
	var $p2_increa_rom_weeks;
	var $p2_increa_rom2;
	var $p2_increa_rom2_desc1;
	var $p2_increa_rom2_desc2;
	var $p2_increa_rom2_desc3;
	var $p2_increa_rom2_weeks;
	var $p2_demos_rom;
	var $p2_demos_rom_weeks;
	var $p2_demos_proper;
	var $p2_demos_proper_prosthe;
	var $p2_demos_proper_brace;
	var $p2_demos_proper_splint;
	var $p2_demos_proper_weeks;
	var $p2_demos_proper_dme;
	var $p2_demos_proper_dme_weeks;
	var $p2_tinetti_bal;
	var $p2_tinetti_bal_score;
	var $p2_tinetti_bal_weeks;
	var $p2_improv_score;
	var $p2_improv_score_desc1;
	var $p2_improv_score_desc2;
	var $p2_follow_exer;
	var $p2_follow_exer_date;
	var $p2_other3;
	var $p2_other3_desc;
	var $p2_other3_weeks;
	var $p2_other4;
	var $p2_other4_desc;
	var $p2_other4_weeks;
	var $p2_discha;
	var $p2_tabxxx_discha_reason;
	var $p2_tab_064_discha_reason;
	var $p2_discha_other;
  var $p2_dis_instructions;
	var $p2_ass_vs;
	var $p2_ass_range;
	var $p2_ass_fun_stren;
	var $p2_ass_gait;
	var $p2_ass_fun_mob;
	var $p2_ass_joint;
	var $p2_ass_posture;
	var $p2_ass_trans_tech;
	var $p2_ass_pain_rest;
	var $p2_ass_fun_end;
	var $p2_ass_bal;
	var $p2_ass_coord;
	var $p2_ass_safety;
	var $p2_ass_soft_tis;
	var $p2_ass_other;
	var $p2_ass_other_des;
	var $p2_dis_return_to_indep;
	var $p2_dis_able_to_remain_assist_cg;
	var $p2_dis_when_max;
	var $p2_dis_able_to_unders;
	var $p2_dis_other;
	var $p2_dis_other_desc;
	var $p2_pat_care_particip;
	var $p2_pat_ok_family_involv;
	var $p2_tab_033_rehab_pot;
	var $p2_rehab_excel;
	var $p2_rehab_good;
	var $p2_rehab_fair;
	var $p2_rehab_poor;
	var $p2_home_consider;
	var $p2_home_req_assis;
	var $p2_home_resid;
	var $p2_home_depen;
	var $p2_home_confu;
	var $p2_home_other;
	var $p2_home_other_desc;
	var $freq_duration;
  var $ther_na;
	var $ther_name;
  var $ther_implem_plan;
  var $ther_follow_plan;
  var $ther_raport_pat_fam; 
  var $ther_eval_plan;
  var $ther_notes;
	var $addendum;
	var $verbal_doctor_order;
	var $verbal_doctor_order_comments;
	var $verbal_doctor_order_date;

	function PtEvArchiveMdl () {

		parent::Model();
		
	}

	function get ( $visit_log_id ) {
	
		$this->db->where('visit_log_id', $visit_log_id);
	
		$query = $this->db->get('vt_pt_evaluation_copy');
		return $query->row();
	
	}

	function insert () {
	
		$this->db->insert('vt_pt_evaluation_copy', $this);
	
	}
	
	function update ( $visit_log_id ) {
	
		unset($this->pt_assess_id);

		$this->db->where('visit_log_id', $visit_log_id);
	
		$this->db->update('vt_pt_evaluation_copy', $this);
	
	}
	
	function getPrevious ( $user_id=null, $previous_date, $episode_id, $allepisodes=false ) {
		
    $soc_id = null;
    if($allepisodes AND $episode_id){      
      $this->db->select('soc_id');
      $this->db->where('cms485_id', $episode_id);
      $query = $this->db->get('cms_485');    
      $row = $query->row_array();
      $soc_id = $row['soc_id'];
    }
    
		$this->db->join('vis_visit_log_copy',   'vis_visit_log_copy.visit_log_id = vt_pt_evaluation_copy.visit_log_id');
		
		if (!is_null($user_id)) $this->db->where('visit_user_id', $user_id);
		$this->db->where('visit_date_time <', $previous_date);
    
    if(!is_null($soc_id)){
      $this->db->join('cms_485',   'cms_485.soc_id = '.$soc_id);
      $this->db->where('vis_visit_log_copy.cms485_id=cms_485.cms485_id');
      $this->db->group_by('vis_visit_log_copy.visit_log_id');
    }else{
      $this->db->where('cms485_id', $episode_id);
		}
    
		$this->db->order_by('visit_date_time');
		
		$query = $this->db->get('vt_pt_evaluation_copy'); 
    
		return $query->result();
		
	}

	function getNext ( $user_id=null, $previous_date, $episode_id ) {
		
		$this->db->join('vis_visit_log_copy',   'vis_visit_log_copy.visit_log_id = vt_pt_evaluation_copy.visit_log_id');
		
		if (!is_null($user_id)) $this->db->where('visit_user_id', $user_id);
		$this->db->where('visit_date_time >', $previous_date);
		$this->db->where('cms485_id', $episode_id);
		
		$this->db->order_by('visit_date_time');
		
		$query = $this->db->get('vt_pt_evaluation_copy');
    
		return $query->result();
		
	}
	
	function copy ( $destination_visit_log_id, $source_visit_log_id ) {

		$object = new PtEvArchiveMdl();
		$object1 = $this->get($destination_visit_log_id);
		$object = $this->get($source_visit_log_id);
		
		$object->pt_assess_id = $object1->pt_assess_id;
		$object->visit_log_id = $destination_visit_log_id;
	
		$this->db->where('visit_log_id', $destination_visit_log_id);
		$this->db->update('vt_pt_evaluation_copy', $object);
		
	}
	
 }
